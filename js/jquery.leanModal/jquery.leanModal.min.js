(function(a){a.fn.extend({leanModal:function(d){var e={overlay:0.7,onopen:function(){},closeButton:null};var c=a("<div id='lean_overlay'></div>");a("body").append(c);d=a.extend(e,d);return this.each(function(){var f=d;a(this).on("click",function(h){let modal_id=a(this).attr("content");let $overlay=a("#lean_overlay");function g(i){if(i.keyCode===27||i.keyCode===8){b(modal_id)}}$overlay.off();$overlay.on("click",function(){b(modal_id)});document.addEventListener("keyup",g,false);a(f.closeButton).off();a(f.closeButton).on("click",function(){b(modal_id)});let modal_height=(a(window).height()-a(modal_id).height())/2;let modal_width=a(modal_id).outerWidth();$overlay.css({display:"block",opacity:0});$overlay.fadeTo(200,f.overlay);a(modal_id).css({display:"block",position:"fixed",opacity:0,"z-index":11000,left:50+"%","margin-left":-(modal_width/2)+"px",top:modal_height+"px"});a(".page-header").css({filter:"blur("+downloadOtherBackgroundBlur+"px)","-webkit-filter":"blur("+downloadOtherBackgroundBlur+"px)"});a("#contentBackground").css({filter:"blur("+downloadOtherBackgroundBlur+"px)","-webkit-filter":"blur("+downloadOtherBackgroundBlur+"px)"});a("a.back-to-top").fadeOut(otherdownloadsfadetime);a(modal_id).fadeTo(otherdownloadsfadetime,1);a("html").css("overflow-y","hidden");a("#downloadother-contents").scrollTop(0);a(window).off("w.resizelean");a(window).on("w.resizelean",function(){modal_width=a(modal_id).outerWidth();a(modal_id).css({top:(a(window).height()-a(modal_id).height())/2+"px","margin-left":-(modal_width/2)+"px"})});f.onopen();h.preventDefault()})});function b(f){a("#lean_overlay").fadeOut(otherdownloadsfadetime);a("html").css("overflow-y","visible");a(".page-header").css({filter:"blur(0px)","-webkit-filter":"blur(0px)"});a("#contentBackground").css({filter:"blur(0px)","-webkit-filter":"blur(0px)"});a(f).css({display:"none"})}}})})(jQuery);