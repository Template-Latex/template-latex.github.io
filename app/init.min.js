let amountScrolled=600;let is_movile_browser=false;let last_version="$VERSION";let last_version_link="$VERSION_LINK";let new_version_entry="";let pdf_href_lastv="";let total_downloads=0;let total_downloads_l30=0;let version_entries=[];$(function(){printAboutInfo();writeBadges();sessionCookie=loadSessionCookies();try{let $s=wallpaper_db.color+wallpaper_db.image+wallpaper_db.position}catch(a){wallpaper_db={color:getRandomDarkColor(),image:null};console.warn("No se pudo cargar wallpaper.db, se creó un color aleatorio por defecto")}finally{}let backgroundmaincolor=shadeColor2(wallpaper_db.color,0.98);let bgprecolor=shadeColor2(wallpaper_db.color,0.9);let codebarcolor=shadeColor2(wallpaper_db.color,0.4);let codeprecolor=shadeColor2(wallpaper_db.color,0.2);let hrcolor=shadeColor2(wallpaper_db.color,0.7);let pacecolor=shadeColor2(wallpaper_db.color,0.15);let $head=$("head");$head.append(String.format('<meta name="theme-color" content="{0}">',backgroundmaincolor));$head.append(String.format('<meta name="msapplication-navbutton-color" content="{0}">',backgroundmaincolor));$head.append(String.format('<meta name="apple-mobile-web-app-capable" content="yes">',backgroundmaincolor));$head.append(String.format('<meta name="apple-mobile-web-app-status-bar-style" content="{0}">',backgroundmaincolor));let jsonquery;if(href_json_releases!==""){jsonquery=$.getJSON(href_json_releases,function(f){total_downloads=0;for(let i=0;i<f.length;i+=1){try{for(let j=0;j<f[i].assets.length;j+=1){total_downloads+=parseInt(f[i].assets[j].download_count);version_entries.push(f[i].tag_name)}}catch(g){console.log(String.format("Error al obtener la cantidad de descargas del archivo {0}",f[i].name))}}try{last_version=f[0].tag_name;last_version_link=f[0].assets[0].browser_download_url;let last_version_link_1=f[0].assets[1].browser_download_url;var e,b;if(last_version_link.includes(".min")){e=last_version_link_1;b=last_version_link}else{e=last_version_link;b=last_version_link_1}console.log(String.format("Última versión template: {0}",last_version))}catch(g){throwError(errors.cantGetVersion)}total_downloads_l30=total_downloads;if(total_downloads===0){total_downloads=nan_value}else{updateDownloadCounter(total_downloads,update_download_counter);let j="";for(let i=0;i<download_list_counter.length;i+=1){j=download_list_counter[i][1];if(version_entries.indexOf(j)===-1){if(Array.isArray(download_list_counter[i][0])){total_downloads+=download_list_counter[i][0][0]+download_list_counter[i][0][1]}else{total_downloads+=download_list_counter[i][0]}}}}update_download_banner(total_downloads);$("#main-content-section #templatestats").attr("href",stats_href+stats_name);if(update_download_counter==="Template-Informe"){let $dlbutton=$("#download-button");$("a[name*=leanModal]").leanModal({closeButton:".modal_close",onopen:function(){$("#download-button-1file").tooltipster("close");$("#autorbanner").tooltipster("close")}});let e=String.format("{0}download/{1}/Template-Informe.zip",href_github_project,last_version);$("#download-button-1file").append(String.format(' <span id="buttonfile1text">(v{0}) <i class="fas fa-download"></i></span>',last_version));$dlbutton.attr("href",e);$dlbutton.append(String.format(' <span id="buttonfilectext">(v{0}) <i class="fas fa-download"></i></span>',last_version));writeOtherLinks(last_version)}else{let $dlbutton=$("#download-button");let $d1fbutton=$("#download-button-1file");$d1fbutton.attr("href",b);$d1fbutton.append(String.format(' <span id="buttonfilectext">(v{0}) <i class="fas fa-download"></i></span>',last_version));$dlbutton.attr("href",e);$dlbutton.append(String.format(' <span id="buttonfile1text">(v{0}) <i class="fas fa-download"></i></span>',last_version));$d1fbutton.click(function(){if(total_downloads!==nan_value){total_downloads+=1;total_downloads_l30+=1;update_download_banner(total_downloads)}})}fadein_css("#total-download-counter-1","0.1s");fadein_css("#total-download-counter-2","0.1s");$("#buttonfile1text").fadeIn("slow");$("#buttonfilectext").fadeIn("slow");pdf_href_lastv=pdf_js_href+String.format(href_pdf_version,last_version);$("#template-preview-pdf").attr("href",pdf_href_lastv);$(".badgeejemplopdf").attr("href",pdf_href_lastv);$("#github-button-header").attr("href",href_github_project_source);let whats_new_html="<div id='que-hay-de-nuevo-version-title'>{0}</div><blockquote class='que-hay-de-nuevo-blockquote'>{1}</blockquote>";let whats_new_versions=Math.min(changelog_max,f.length);let md_converter=new showdown.Converter();let show_github_button=(whats_new_versions===changelog_max);try{for(let i=0;i<whats_new_versions;i+=1){let version_created_at=f[i].created_at.substring(0,10);let $version_created_at=version_created_at.substring(8,10)+"/"+version_created_at.substring(5,7)+"/"+version_created_at.substring(0,4);let title_new_version=String.format('<b>Versión <a href="{2}" class="javascripthref">{0}</b></a>: <i class="fecha-estilo">{1}</i>',f[i].tag_name,$version_created_at,f[i].html_url);let content_version=md_converter.makeHtml(f[i].body);new_version_entry+=String.format(whats_new_html,title_new_version,content_version);if(i<whats_new_versions-1&&changelog_show_hr){new_version_entry+='<hr class="style1">'}}if(show_github_button){new_version_entry+=String.format("Puedes ver la lista de cambios completa en <a href='{0}' class='javascripthref'>GitHub <i class='fab fa-github'></i></a>",href_github_project)}$("#que-hay-de-nuevo").html(new_version_entry);$(".main-content hr").css("background-color",hrcolor);$(".que-hay-de-nuevo-blockquote").css("border-left","0.25rem solid "+codebarcolor)}catch(c){throwError(errors.retrieveContentVersions);throwException(c)}afterJSONLoad()});jsonquery.fail(function(){throwError(errors.cantLoadJson)});$("total-download-counter").each(function(){this.id.innerHTML=total_downloads});$("#download-button").click(function(){if(total_downloads!==nan_value){total_downloads+=1;total_downloads_l30+=1;update_download_banner(total_downloads)}});if(update_downloads_version){setInterval(function(){let update_downloads=0;let update_last_version="";jsonquery=$.getJSON(href_json_releases,function(b){for(let i=0;i<b.length;i+=1){try{for(let j=0;j<b[i].assets.length;j+=1){update_downloads+=parseInt(b[i].assets[j].download_count)}}catch(c){console.log(String.format("Error al obtener la cantidad de descargas del archivo {0}",b[i].name))}}update_last_version=b[0].tag_name;if(update_last_version!==last_version){console.log(String.format("Se encontró una nueva versión v{0}, recargando págna",update_last_version));location.reload()}if(update_downloads>total_downloads_l30){let delta_downloads=update_downloads-total_downloads_l30;let d=new Date();console.log(String.format("[{1} {2}] Actualizando el contador de descargas, +{0} descargas",delta_downloads,d.toLocaleDateString(),d.toLocaleTimeString()));total_downloads+=delta_downloads;total_downloads_l30+=delta_downloads;update_download_banner(total_downloads)}})},seconds_update_downloadCounter*1000)}}let $bgheaderc=$("#background-page-header-colored");$bgheaderc.css("background-color",wallpaper_db.color);$bgheaderc.show();$(".main-content .functtitlstyle").css("color",wallpaper_db.color);$(".main-content h1").css("color",wallpaper_db.color);$(".main-content h2").css("color",wallpaper_db.color);$(".main-content h3").css("color",wallpaper_db.color);$(".main-content h4").css("color",wallpaper_db.color);$(".main-content h5").css("color",wallpaper_db.color);$(".main-content h6").css("color",wallpaper_db.color);$(".menu-big-entry").css("color",wallpaper_db.color);$(".menu-little-entry").css("color",wallpaper_db.color);$(".que-hay-de-nuevo-blockquote h3").css("color",wallpaper_db.color);$(".section-template").css("color",wallpaper_db.color);$(".main-content hr").css("background-color",hrcolor);$(".main-content blockquote").css({"border-left":"0.25rem solid "+codebarcolor,color:codeprecolor});$(".main-content pre").css({"background-color":bgprecolor,border:"solid 1px "+codeprecolor});$(".main-content").css("background-color",backgroundmaincolor);$("#contentBackground").css("background-color",backgroundmaincolor);$("body").css("background-color",backgroundmaincolor);$("#que-hay-de-nuevo blockquote").css("border-left","0.25rem solid "+codebarcolor);$("head").append(String.format("<style>.preExampleButton{background-color:{0}}</style>",codeprecolor));if(/Mobi/.test(navigator.userAgent)){is_movile_browser=true;console.log("Utilizando versión móvil")}else{console.log("Utilizando versión escritorio")}if(wallpaper_db.image!==null){console.log(String.format("Cargando fondo {0} - ID {1} (wallpaper.db)",wallpaper_db.image,wallpaper_db.index));if(!is_movile_browser&&enableparallax){$("#background-page-header").parallax({src:wallpaper_db.image,posX:"center",posY:"bottom",speed:0.2,zIndex:1,afterRefresh:function(){if(parallaxloaded){return}$("#background-page-header-colored").fadeOut(800);let $parallax=$(".parallax-mirror");$parallax.fadeIn();$parallax.attr("id","parallaxBgHeader");wallpaper_db_random_blur("parallaxBgHeader",blurprobability,blurlimits);backgroundResize=function(){if(!scrollLock){$(".parallax-mirror").css("width",$(window).outerWidth()+"px")}};$(window).on("resize.parallax",backgroundResize);backgroundResize();parallaxloaded=true}})}else{try{let back_img=new Image();back_img.onload=function(){let $bgheader=$("#background-page-header");$bgheader.css({background:wallpaper_db.color+" url("+wallpaper_db.image+") "+wallpaper_db.position+" no-repeat fixed","background-attachment":"fixed"});$bgheader.css("-webkit-background-size","cover");$bgheader.css("-moz-background-size","cover");$bgheader.css("-o-background-size","cover");$bgheader.css("background-size","cover");$bgheader.css("max-width","100%");$bgheader.css("width",$(window).width()+20);$bgheaderc.fadeOut();$bgheader.fadeIn();backgroundResize=function(){if(!scrollLock){$("#background-page-header").css("width",$(window).width()+20)}};$(window).on("resize.backgroundPageHeader",backgroundResize);wallpaper_db_random_blur("#background-page-header",blurprobability,blurlimits)};back_img.src=wallpaper_db.image}catch(a){console.log("Error crítico al obtener la imagen del wallpaper (wallpaper.db)")}finally{}}}if(changepacecolor){$(".pace .pace-progress").css("background",pacecolor);$(".pace .pace-activity").css({"border-top-color":codeprecolor,"border-left-color":codeprecolor});$(".pace .pace-progress-inner").css("box-shadow","0 0 10px "+bgprecolor+", 0 0 5px "+bgprecolor+";")}backToTop=$.backToTop({backgroundColor:wallpaper_db.color,height:65,position:"top right",pxToTrigger:amountScrolled,scrollAnimation:400,width:65});$('a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){let target=$(this.hash);target=target.length?target:$("[name="+this.hash.slice(1)+"]");if(target.length){$("html, body").animate({scrollTop:target.offset().top},700);return false}}});$(".highlight-text-tex").each(function(){selectAllText(this)});$("#download-button-1file").tooltipster({animation:"grow",content:"Seleccionar entre distintas versiones",delay:600,maxWidth:200,side:"bottom",theme:"tooltipster-borderless"});$("#autorbanner").tooltipster({animation:"grow",content:'<img src="https://avatars0.githubusercontent.com/u/12925256" class="autor_photo" alt=""/>\n        <div class="autor_name">Pablo Pizarro R.</div>\n    <div class="autor_location">\n        <svg aria-hidden="true" height="16" class="tooltiptext_autor_svg" viewBox="0 0 12 16" width="12">\n        <path fill-rule="evenodd"\n    d="M6 0C2.69 0 0 2.5 0 5.5 0 10.02 6 16 6 16s6-5.98 6-10.5C12 2.5 9.31 0 6 0zm0 14.55C4.14 12.52 1 8.44 1 5.5 1 3.02 3.25 1 6 1c1.34 0 2.61.48 3.56 1.36.92.86 1.44 1.97 1.44 3.14 0 2.94-3.14 7.02-5 9.05zM8 5.5c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path>\n        </svg>\n    Santiago, Chile\n    </div>',contentAsHTML:true,delay:400,maxWidth:220,side:"bottom",theme:"tooltipster-borderless"});loadInitialPopup();loadEncuesta();NotificationJS.init({backgroundcolor:wallpaper_db.color,core:"amaranjs",enabled:true,exceptionTitle:"Error",maxStack:5,textcolor:"#ffffff",timeout:60*1000});let $throwNotification=function(e,b,c){if(e.length===0){return}setTimeout(function(){NotificationJS.other(e,{persistent:b})},1000*(4+Math.pow(c+1,3)))};let $c=Object.keys(notification);for(let $i=0;$i<$c.length;$i++){if($c[$i]==="sabiasque"){let $rand=Object.keys(notification[$c[$i]]).randomElement();let $text=String.format("Sabías que <b>#{0}</b>:<br>{1}",$rand,notification[$c[$i]][$rand]);$text=$text.replace(":)","😉");$throwNotification($text,false,$i);continue}if(notification[$c[$i]].content.length===0){continue}$throwNotification(notification[$c[$i]].content,notification[$c[$i]].persistent,$i)}afterDocumentReady()});