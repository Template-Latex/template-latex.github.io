var last_version="$VERSION";var last_version_link="$VERSION_LINK";var new_version_entry="";var pdf_href_lastv="";var total_downloads=0;var total_downloads_l30=0;var version_entries=[];$(function(){$.confirm({title:"Aviso importante",content:"La web de Template-Informe se encuentra en proceso de actualización a modo de preparación para la versión 5.0.0, es posible que existan algunos errores en el funcionamiento.",useBootstrap:false,buttons:{close:{text:"Entendido"}},boxWidth:"25%"});printAboutInfo();writeBadges();let backgroundmaincolor=shadeColor2(wallpaper_db.color,0.98);let bgprecolor=shadeColor2(wallpaper_db.color,0.9);let codebarcolor=shadeColor2(wallpaper_db.color,0.4);let codeprecolor=shadeColor2(wallpaper_db.color,0.2);let hrcolor=shadeColor2(wallpaper_db.color,0.7);let pacecolor=shadeColor2(wallpaper_db.color,0.15);var a=$("head");a.append(String.format('<meta name="theme-color" content="{0}">',backgroundmaincolor));a.append(String.format('<meta name="msapplication-navbutton-color" content="{0}">',backgroundmaincolor));a.append(String.format('<meta name="apple-mobile-web-app-capable" content="yes">',backgroundmaincolor));a.append(String.format('<meta name="apple-mobile-web-app-status-bar-style" content="{0}">',backgroundmaincolor));var g=$.getJSON(href_json_releases,function(n){total_downloads=0;for(m=0;m<n.length;m++){try{for(let j=0;j<n[m].assets.length;j++){total_downloads+=parseInt(n[m].assets[j].download_count);version_entries.push(n[m].tag_name)}}catch(o){console.log(String.format("Error al obtener la cantidad de descargas del archivo {0}",n[m].name))}}try{last_version=n[0].tag_name;last_version_link=n[0].assets[0].browser_download_url;console.log(String.format("Última versión template: {0}",last_version))}catch(o){throwError(errors.cantGetVersion)}total_downloads_l30=total_downloads;if(total_downloads===0){total_downloads=nan_value}else{updateDownloadCounter(total_downloads,update_download_counter);let j="";for(var m=0;m<download_list_counter.length;m++){j=download_list_counter[m][1];if(version_entries.indexOf(j)===-1){if(Array.isArray(download_list_counter[m][0])){total_downloads+=download_list_counter[m][0][0]+download_list_counter[m][0][1]}else{total_downloads+=download_list_counter[m][0]}}}}update_download_banner(total_downloads);$("#main-content-section #templatestats").attr("href",stats_href+stats_name);if(update_download_counter==="Template-Informe"){let $dlbutton=$("#download-button");$("a[name*=leanModal]").leanModal({closeButton:".modal_close"});let normal_link=String.format("{0}download/{1}/Template-Informe.zip",href_github_project,last_version);$("#download-button-1file").append(String.format(' <span id="buttonfile1text">(v{0}) <img src="res/ui/zip.png" class="iconbutton" /></span>',last_version));$dlbutton.attr("href",normal_link);$dlbutton.append(String.format(' <span id="buttonfilectext">(v{0}) <img src="res/ui/zip.png" class="iconbutton" /></span>',last_version));writeOtherLinks(last_version)}else{let $dlbutton=$("#download-button");let $d1fbutton=$("#download-button-1file");$d1fbutton.attr("href",compact_link);$d1fbutton.append(String.format(' <span id="buttonfilectext">(v{0}) <img src="res/ui/zip.png" class="iconbutton" /></span>',last_version));$dlbutton.attr("href",normal_link);$dlbutton.append(String.format(' <span id="buttonfile1text">(v{0}) <img src="res/ui/zip.png" class="iconbutton" /></span>',last_version));$d1fbutton.click(function(){if(total_downloads!==nan_value){total_downloads+=1;total_downloads_l30+=1;update_download_banner(total_downloads)}})}fadein_css("#total-download-counter-1","0.1s");fadein_css("#total-download-counter-2","0.1s");$("#buttonfile1text").fadeIn("slow");$("#buttonfilectext").fadeIn("slow");pdf_href_lastv=pdf_js_href+String.format(href_pdf_version,last_version);$("#template-preview-pdf").attr("href",pdf_href_lastv);$(".badgeejemplopdf").attr("href",pdf_href_lastv);$("#github-button-header").attr("href",href_github_project_source);var l="<div id='que-hay-de-nuevo-version-title'>{0}</div><blockquote class='que-hay-de-nuevo-blockquote'>{1}</blockquote>";var q=Math.min(changelog_max,n.length);var p=new showdown.Converter();var e=(q===changelog_max);try{for(m=0;m<q;m++){let version_created_at=n[m].created_at.substring(0,10);let title_new_version=String.format('<b>Versión <a href="{2}"">{0}</b></a>: <i class="fecha-estilo">{1}</i>',n[m].tag_name,version_created_at,n[m].html_url);let content_version=p.makeHtml(n[m].body);new_version_entry+=String.format(l,title_new_version,content_version);if(m<q-1&&changelog_show_hr){new_version_entry+='<hr class="style1">'}}if(e){new_version_entry+=String.format("Puedes ver la lista de cambios completa <a href='{0}'>en Github<img src='res/ui/github.png' width='16' height='' class='iconbutton' alt='' /></a>",href_github_project)}$("#que-hay-de-nuevo").html(new_version_entry);$(".main-content hr").css("background-color",hrcolor);$(".que-hay-de-nuevo-blockquote").css("border-left","0.25rem solid "+codebarcolor)}catch(k){throwError(errors.retrieveContentVersions);throwException(k)}afterJSONLoad()});g.fail(function(e){throwError(errors.cantLoadJson)});let $bgheaderc=$("#background-page-header-colored");$bgheaderc.css("background-color",wallpaper_db.color);$bgheaderc.fadeIn("slow");$(".back-to-top").css("background-color",wallpaper_db.color);$(".main-content h1").css("color",wallpaper_db.color);$(".main-content h2").css("color",wallpaper_db.color);$(".main-content h3").css("color",wallpaper_db.color);$(".main-content h4").css("color",wallpaper_db.color);$(".main-content h5").css("color",wallpaper_db.color);$(".main-content h6").css("color",wallpaper_db.color);$(".menu-big-entry").css("color",wallpaper_db.color);$(".menu-little-entry").css("color",wallpaper_db.color);$(".que-hay-de-nuevo-blockquote h3").css("color",wallpaper_db.color);$(".section-template").css("color",wallpaper_db.color);$(".main-content hr").css("background-color",hrcolor);$(".main-content blockquote").css({"border-left":"0.25rem solid "+codebarcolor,color:codeprecolor});$(".main-content pre").css({"background-color":bgprecolor,border:"solid 1px "+codeprecolor});$(".main-content").css("background-color",backgroundmaincolor);$("#contentBackground").css("background-color",backgroundmaincolor);$("body").css("background-color",backgroundmaincolor);$("#que-hay-de-nuevo blockquote").css("border-left","0.25rem solid "+codebarcolor);var f=false;if(/Mobi/.test(navigator.userAgent)){f=true;console.log("Utilizando versión móvil")}else{console.log("Utilizando versión web")}if(!f&&enableparallax){$("#background-page-header").parallax({imageSrc:wallpaper_db.image,speed:0.15,positionY:wallpaper_db.position,positionX:"center",zIndex:1});console.log("Se activó el parallax")}else{try{var b=new Image();console.log(String.format("Cargando fondo {0} - ID {1} (wallpaper.db)",wallpaper_db.image,wallpaper_db.index));b.onload=function(){let $bgheader=$("#background-page-header");$bgheader.css({background:wallpaper_db.color+" url("+wallpaper_db.image+") "+wallpaper_db.position+" no-repeat fixed","background-attachment":"fixed"});$bgheader.css("-webkit-background-size","cover");$bgheader.css("-moz-background-size","cover");$bgheader.css("-o-background-size","cover");$bgheader.css("background-size","cover");$bgheader.css("max-width","100%");$bgheader.css("width",$(window).width()+20);fadein_css("#background-page-header","0.5s");wallpaper_db_random_blur("#background-page-header",blurprobability,blurlimits)};b.src=wallpaper_db.image}catch(c){console.log("Error crítico al obtener la imagen del wallpaper (wallpaper.db)")}finally{}}if(changepacecolor){$(".pace .pace-progress").css("background",pacecolor);$(".pace .pace-activity").css({"border-top-color":codeprecolor,"border-left-color":codeprecolor});$(".pace .pace-progress-inner").css("box-shadow","0 0 10px "+bgprecolor+", 0 0 5px "+bgprecolor+";")}$(window).resize(function(){$("#background-page-header").css("width",$(window).width()+20)});$("total-download-counter").each(function(){this.id.innerHTML=total_downloads});$("#download-button").click(function(){if(total_downloads!==nan_value){total_downloads+=1;total_downloads_l30+=1;update_download_banner(total_downloads)}});var h=600;$(window).scroll(function(){location.pathname.replace(/^\//,"");if($(window).scrollTop()>h){$("a.back-to-top").fadeIn("slow")}else{$("a.back-to-top").fadeOut("slow")}});$('a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var e=$(this.hash);e=e.length?e:$("[name="+this.hash.slice(1)+"]");if(e.length){$("html, body").animate({scrollTop:e.offset().top},700);return false}}});$("#chatgitter").attr("href",gitter_href+update_download_counter);if(update_downloads_version){setInterval(function(){let update_downloads=0;let update_last_version="";g=$.getJSON(href_json_releases,function(e){for(let i=0;i<e.length;i++){try{for(let j=0;j<e[i].assets.length;j++){update_downloads+=parseInt(e[i].assets[j].download_count)}}catch(k){console.log(String.format("Error al obtener la cantidad de descargas del archivo {0}",e[i].name))}}update_last_version=e[0].tag_name;if(update_last_version!==last_version){console.log(String.format("Se encontró una nueva versión v{0}, recargando págna",update_last_version));location.reload()}if(update_downloads>total_downloads_l30){let delta_downloads=update_downloads-total_downloads_l30;let d=new Date();console.log(String.format("[{1} {2}] Actualizando el contador de descargas, +{0} descargas",delta_downloads,d.toLocaleDateString(),d.toLocaleTimeString()));total_downloads+=delta_downloads;total_downloads_l30+=delta_downloads;update_download_banner(total_downloads)}})},seconds_update_downloadCounter*1000)}$(".highlight-text-tex").each(function(){selectAllText(this)});afterDocumentReady()});